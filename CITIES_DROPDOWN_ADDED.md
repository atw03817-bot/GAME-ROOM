# ✅ إضافة قائمة منسدلة للمدن

## التحديث:
تم تحويل حقل "المدينة" من input text إلى قائمة منسدلة (dropdown/select) تعرض المدن الـ 66 المحفوظة في قاعدة البيانات.

## التغييرات:

### 1. AddressManager.jsx

#### إضافة state للمدن:
```javascript
const [cities, setCities] = useState([]);
```

#### إضافة دالة لجلب المدن:
```javascript
const fetchCities = async () => {
  try {
    const response = await api.get('/shipping/cities');
    setCities(response.data.data || []);
  } catch (error) {
    console.error('Error fetching cities:', error);
    // استخدام قائمة افتراضية في حالة الخطأ
    setCities(['الرياض', 'جدة', 'مكة المكرمة', 'المدينة المنورة', 'الدمام']);
  }
};
```

#### تحديث useEffect:
```javascript
useEffect(() => {
  fetchAddresses();
  fetchCities(); // ← جديد
}, []);
```

#### تحديث حقل المدينة:
```javascript
// قبل: input text
<input
  type="text"
  required
  value={formData.city}
  onChange={(e) => setFormData({ ...formData, city: e.target.value })}
  className="w-full border rounded-lg px-3 py-2"
/>

// بعد: select dropdown
<select
  required
  value={formData.city}
  onChange={(e) => setFormData({ ...formData, city: e.target.value })}
  className="w-full border rounded-lg px-3 py-2 bg-white"
>
  <option value="">اختر المدينة</option>
  {cities.map((city) => (
    <option key={city} value={city}>
      {city}
    </option>
  ))}
</select>
```

## API Endpoint المستخدم:

```
GET /api/shipping/cities
```

**Response:**
```json
{
  "success": true,
  "data": [
    "الرياض",
    "جدة",
    "مكة المكرمة",
    "المدينة المنورة",
    "الدمام",
    "الخبر",
    "الظهران",
    "الطائف",
    "تبوك",
    "بريدة",
    // ... 56 مدينة أخرى
  ]
}
```

## المدن المتاحة (66 مدينة):

المدن يتم جلبها من `ShippingRate` collection في MongoDB، وتشمل:
- الرياض
- جدة
- مكة المكرمة
- المدينة المنورة
- الدمام
- الخبر
- الظهران
- الطائف
- تبوك
- بريدة
- خميس مشيط
- حائل
- نجران
- جازان
- ينبع
- الأحساء
- القطيف
- حفر الباطن
- الجبيل
- الخرج
- أبها
- عرعر
- سكاكا
- القريات
- الباحة
- الدوادمي
- صبيا
- بيشة
- الليث
- رابغ
- الزلفي
- المجمعة
- القنفذة
- الدرعية
- الأفلاج
- وادي الدواسر
- شقراء
- المذنب
- عنيزة
- الرس
- البكيرية
- البدائع
- رياض الخبراء
- الشماسية
- ضرماء
- المزاحمية
- رماح
- ثادق
- حريملاء
- الحريق
- الدلم
- الخرمة
- رنية
- تربة
- الطوال
- ميسان
- العلا
- ضباء
- الوجه
- أملج
- تيماء
- دومة الجندل
- طريف
- رفحاء
- العويقيلة
- صامطة

## المميزات:

✅ **سهولة الاستخدام:** المستخدم يختار من قائمة بدلاً من الكتابة  
✅ **تجنب الأخطاء:** لا أخطاء إملائية في أسماء المدن  
✅ **التوافق:** يعمل مع نظام الشحن الموجود  
✅ **Fallback:** قائمة افتراضية في حالة فشل جلب المدن  
✅ **Performance:** المدن تُجلب مرة واحدة عند فتح النموذج  

## الاختبار:

### 1. افتح صفحة Checkout:
```
http://localhost:5173/checkout
```

### 2. اضغط "إضافة عنوان جديد"

### 3. تحقق من حقل المدينة:
- ✅ يظهر كقائمة منسدلة
- ✅ يحتوي على "اختر المدينة" كخيار افتراضي
- ✅ يعرض جميع المدن (66 مدينة)
- ✅ يمكن البحث بالكتابة (في بعض المتصفحات)

### 4. اختر مدينة واملأ باقي البيانات

### 5. احفظ العنوان:
- ✅ يتم الحفظ بنجاح
- ✅ المدينة تظهر بشكل صحيح في قائمة العناوين

## ملاحظات:

1. **البيانات الحالية:**
   - العناوين المحفوظة سابقاً تعمل بشكل طبيعي
   - لا حاجة لتحديث البيانات القديمة

2. **التعديل:**
   - عند تعديل عنوان، المدينة تظهر محددة في القائمة
   - يمكن تغييرها لمدينة أخرى

3. **الأداء:**
   - المدن تُجلب مرة واحدة فقط
   - لا تأثير على سرعة التطبيق

4. **المستقبل:**
   - يمكن إضافة بحث/فلترة للمدن إذا لزم الأمر
   - يمكن تجميع المدن حسب المنطقة
