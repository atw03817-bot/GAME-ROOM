// Script Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø¹Ø§Ø± ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
import mongoose from 'mongoose';
import dotenv from 'dotenv';

dotenv.config({ path: './backend/.env' });

// Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
const storeSettingsSchema = new mongoose.Schema({}, { strict: false });
const StoreSettings = mongoose.model('StoreSettings', storeSettingsSchema);

async function updateLogo() {
  try {
    await mongoose.connect(process.env.MONGODB_URI);
    console.log('âœ… Ù…ØªØµÙ„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');

    // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±
    let settings = await StoreSettings.findOne();
    
    if (!settings) {
      console.log('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª');
      return;
    }

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø¹Ø§Ø±
    if (!settings.header) {
      settings.header = {};
    }
    
    settings.header.logo = '/gameroom-logo.svg';
    settings.header.storeName = 'Ø¬ÙŠÙ… Ø±ÙˆÙ…';
    settings.header.tagline = 'Ù…ØªØ¬Ø± Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©';

    await settings.save();
    console.log('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø¹Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­');
    console.log('ğŸ® Ø§Ù„Ø´Ø¹Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯:', settings.header.logo);
    
  } catch (error) {
    console.error('âŒ Ø®Ø·Ø£:', error);
  } finally {
    await mongoose.disconnect();
    console.log('ğŸ”Œ ØªÙ… Ù‚Ø·Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„');
  }
}

updateLogo();