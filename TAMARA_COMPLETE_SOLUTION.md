# ุญู ูุดููุฉ Tamara Payment - ุงูุญู ุงููุงูู โ

## ุงููุดุงูู ุงูุชู ุชู ุญููุง

### 1. ุฎุทุฃ 500 ูู ุฅูุดุงุก ุฌูุณุฉ ุงูุฏูุน โ
- **ุงููุดููุฉ**: ูุชุบูุฑุงุช `billing` ู `shipping` ุบูุฑ ูุนุฑูุฉ ูู ุฏุงูุฉ ุงูุชุญูู
- **ุงูุญู**: ุฅุนุงุฏุฉ ุชุฑุชูุจ ุงูููุฏ ูุชุนุฑูู ุงููุชุบูุฑุงุช ูุจู ุงุณุชุฎุฏุงููุง

### 2. ุนุฏู ูุฌูุฏ ุตูุญุงุช ูุชุงุฆุฌ ุงูุฏูุน โ
- **ุงููุดููุฉ**: ูุง ุชูุฌุฏ ุตูุญุงุช ููุชุนุงูู ูุน ูุฌุงุญ/ูุดู/ุฅูุบุงุก ุงูุฏูุน
- **ุงูุญู**: ุฅูุดุงุก ุตูุญุงุช ูุฎุตุตุฉ ููู ุญุงูุฉ

## ุงููููุงุช ุงููููุดุฃุฉ ูุงูููุญุฏุซุฉ

### ุงููููุงุช ุงูุฌุฏูุฏุฉ:
1. **`frontend/src/pages/OrderFailed.jsx`** - ุตูุญุฉ ูุดู ุงูุฏูุน
2. **`frontend/src/pages/OrderCancelled.jsx`** - ุตูุญุฉ ุฅูุบุงุก ุงูุฏูุน
3. **`TEST_TAMARA_COMPLETE_FLOW.bat`** - ููู ุงุฎุชุจุงุฑ ุดุงูู

### ุงููููุงุช ุงูููุญุฏุซุฉ:
1. **`backend/services/tamaraPaymentService.js`** - ุฅุตูุงุญ ุฏุงูุฉ ุงูุชุญูู
2. **`backend/controllers/paymentController.js`** - ุฅุตูุงุญ ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ
3. **`frontend/src/pages/OrderSuccess.jsx`** - ุฏุนู Tamara
4. **`frontend/src/App.jsx`** - ุฅุถุงูุฉ ุงูุตูุญุงุช ุงูุฌุฏูุฏุฉ ููู Router

## ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. ุตูุญุฉ ูุดู ุงูุฏูุน (`OrderFailed.jsx`)
- **ุงููููุฒุงุช**:
  - ุนุฑุถ ุณุจุจ ุงููุดู ุจูุถูุญ
  - ุงุณุชุนุงุฏุฉ ุงูุณูุฉ ุชููุงุฆูุงู
  - ูุตุงุฆุญ ูุญู ุงููุดููุฉ
  - ุฃุฒุฑุงุฑ ููุนูุฏุฉ ููุณูุฉ ุฃู ุงูุฑุฆูุณูุฉ
  - ูุนูููุงุช ุงูุงุชุตุงู ุจุงูุฏุนู

### 2. ุตูุญุฉ ุฅูุบุงุก ุงูุฏูุน (`OrderCancelled.jsx`)
- **ุงููููุฒุงุช**:
  - ุชูุถูุญ ุฃู ุงูุนูููุฉ ุฃูุบูุช ุจุฃูุงู
  - ุงูุงุญุชูุงุธ ุจุงูููุชุฌุงุช ูู ุงูุณูุฉ
  - ุนุฑุถ ุทุฑู ุฏูุน ุจุฏููุฉ
  - ุฃุฒุฑุงุฑ ูุฅููุงู ุงูุดุฑุงุก ุฃู ุงูุชุตูุญ

### 3. ุชุญุฏูุซ ุตูุญุฉ ุงููุฌุงุญ (`OrderSuccess.jsx`)
- **ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ**:
  - ุฏุนู Tamara ุจุฌุงูุจ Tap Payment
  - ุงูุชุนุฑู ุนูู ูุตุฏุฑ ุงูุฏูุน ูู ุงูู URL
  - ุนุฑุถ ุทุฑููุฉ ุงูุฏูุน ุจุดูู ุตุญูุญ

## ุฑูุงุจุท ุงูุชูุฌูู

### ุฑูุงุจุท Tamara ูู ุงูู Backend:
```javascript
// ูู createTamaraCheckout
successUrl: `${FRONTEND_URL}/order-success?orderId=${orderId}&provider=tamara`
failureUrl: `${FRONTEND_URL}/order-failed?orderId=${orderId}&provider=tamara`
cancelUrl: `${FRONTEND_URL}/order-cancelled?orderId=${orderId}&provider=tamara`
```

### ูุนุงูุฌุฉ ุงูุฑูุงุจุท ูู ุงูู Frontend:
- **ุงููุฌุงุญ**: `/order-success?orderId=XXX&provider=tamara`
- **ุงููุดู**: `/order-failed?orderId=XXX&provider=tamara&reason=payment_failed`
- **ุงูุฅูุบุงุก**: `/order-cancelled?orderId=XXX&provider=tamara&reason=user_cancelled`

## ุชุฏูู ุงูุนูู ุงููุงูู

### 1. ุฅูุดุงุก ุงูุทูุจ
```
ุงููุณุชุฎุฏู โ ุงุฎุชูุงุฑ Tamara โ ุฅูุดุงุก ุงูุทูุจ โ ุฅูุดุงุก ุฌูุณุฉ Tamara
```

### 2. ุนูููุฉ ุงูุฏูุน
```
ุฌูุณุฉ Tamara โ ุตูุญุฉ Tamara โ ุงููุณุชุฎุฏู ูุฏูุน/ููุบู/ููุดู
```

### 3. ุงููุชุงุฆุฌ
```
ูุฌุญ โ order-success (ุชูุฑูุบ ุงูุณูุฉ + ุนุฑุถ ุงูุชูุงุตูู)
ูุดู โ order-failed (ุงุณุชุนุงุฏุฉ ุงูุณูุฉ + ูุตุงุฆุญ)
ุฃูุบู โ order-cancelled (ุงูุงุญุชูุงุธ ุจุงูุณูุฉ + ุฎูุงุฑุงุช ุฃุฎุฑู)
```

## ุงูู Webhooks

### ุฃุญุฏุงุซ Tamara ุงููุฏุนููุฉ:
- `order_approved` - ููุงููุฉ ุนูู ุงูุทูุจ
- `order_declined` - ุฑูุถ ุงูุทูุจ  
- `order_expired` - ุงูุชูุงุก ุตูุงุญูุฉ ุงูุทูุจ
- `order_authorised` - ุชูููุถ ุงูุฏูุน
- `order_captured` - ุงูุชูุงุท ุงูุฏูุน (ุงูุชูุงู)
- `order_cancelled` - ุฅูุบุงุก ุงูุทูุจ
- `order_refunded` - ุงุณุชุฑุฏุงุฏ ุงููุจูุบ

## ุงุฎุชุจุงุฑ ุงููุธุงู

### ุชุดุบูู ุงูุงุฎุชุจุงุฑ:
```bash
./TEST_TAMARA_COMPLETE_FLOW.bat
```

### ุงุฎุชุจุงุฑ ุงูุตูุญุงุช ูุจุงุดุฑุฉ:
- **ุงููุฌุงุญ**: `http://localhost:5173/order-success?orderId=TEST&provider=tamara`
- **ุงููุดู**: `http://localhost:5173/order-failed?orderId=TEST&provider=tamara&reason=payment_failed`
- **ุงูุฅูุบุงุก**: `http://localhost:5173/order-cancelled?orderId=TEST&provider=tamara&reason=user_cancelled`

## ุงููุชุทูุจุงุช ููุนูู ุงูุตุญูุญ

### 1. ุฅุนุฏุงุฏุงุช Tamara:
- Merchant Token ุตุญูุญ
- API URL ุตุญูุญ (sandbox ุฃู production)
- Notification Token (ุงุฎุชูุงุฑู ููู webhooks)

### 2. ุจูุงูุงุช ุงูุนููู:
- ุฑูู ุฌูุงู ุณุนูุฏู ุตุญูุญ (+966XXXXXXXXX)
- ุนููุงู ููุชูู
- ุงุณู ุงูุนููู

### 3. ุจูุงูุงุช ุงูุทูุจ:
- ูุจูุบ ุจูู 1-30000 ุฑูุงู
- ููุชุฌ ูุงุญุฏ ุนูู ุงูุฃูู
- ุชูุงุตูู ุงูุดุญู ููุชููุฉ

## ุงูุญุงูุฉ ุงูุญุงููุฉ โ

- โ ุฅุตูุงุญ ุฎุทุฃ 500 ูู ุฅูุดุงุก ุฌูุณุฉ ุงูุฏูุน
- โ ุฅูุดุงุก ุตูุญุงุช ูุชุงุฆุฌ ุงูุฏูุน (ูุฌุญ/ูุดู/ุฃูุบู)
- โ ุชุญุฏูุซ ุงูู Router ูุฏุนู ุงูุตูุญุงุช ุงูุฌุฏูุฏุฉ
- โ ุชุญุฏูุซ ุตูุญุฉ ุงููุฌุงุญ ูุฏุนู Tamara
- โ ูุนุงูุฌุฉ ุงูู webhooks ุจุดูู ุตุญูุญ
- โ ุงุณุชุนุงุฏุฉ ุงูุณูุฉ ุนูุฏ ุงููุดู/ุงูุฅูุบุงุก
- โ ุนุฑุถ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ููููุฏุฉ

## ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑูุฉ)

1. **ุชุญุณูู UX**:
   - ุฅุถุงูุฉ loading states ุฃูุถู
   - ุฑุณุงุฆู ุชุฃููุฏ ุฃูุซุฑ ุชูุตููุงู
   - ุฅุดุนุงุฑุงุช push ููุญุงูุงุช ุงููุฎุชููุฉ

2. **ุชุญูููุงุช**:
   - ุชุชุจุน ูุนุฏูุงุช ูุฌุงุญ/ูุดู ุงูุฏูุน
   - ุชุญููู ุฃุณุจุงุจ ุงููุดู ุงูุดุงุฆุนุฉ
   - ุฅุญุตุงุฆูุงุช ุงุณุชุฎุฏุงู ุทุฑู ุงูุฏูุน

3. **ุฃูุงู ุฅุถุงูู**:
   - ุชุดููุฑ ุฅุถุงูู ููุจูุงูุงุช ุงูุญุณุงุณุฉ
   - rate limiting ููู webhooks
   - logging ููุตู ุฃูุซุฑ

ุงููุธุงู ุงูุขู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุจุดูู ูุงูู! ๐